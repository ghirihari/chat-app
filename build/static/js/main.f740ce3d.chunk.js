(this["webpackJsonpchat-room"]=this["webpackJsonpchat-room"]||[]).push([[0],{13:function(e,t,s){"use strict";var a=s(84),n=(s(159),a.a.initializeApp({apiKey:"AIzaSyDqtvna4fTwx3IU3aLAXu5JlY6_aSz_0Ds",authDomain:"mc-chat-2e403.firebaseapp.com",databaseURL:"https://mc-chat-2e403-default-rtdb.firebaseio.com",projectId:"mc-chat-2e403",storageBucket:"mc-chat-2e403.appspot.com",messagingSenderId:"579190295032",appId:"1:579190295032:web:08736623bdb7e0776cae0d"}));t.a=n},130:function(e,t){},160:function(e,t,s){"use strict";s.r(t);var a=s(3),n=s.n(a),c=s(22),i=s.n(c),l=(s(93),s(7)),r=s(8),o=s(11),d=s(10),u=(s(23),s(42)),h=s(15),j=s(1),m=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(){var e;return Object(l.a)(this,s),(e=t.call(this)).usernameTyped=function(t){e.setState({username:t.target.value})},e.roomTyped=function(t){e.setState({room:t.target.value})},e.joinroom=function(){e.setState({redirect:!0})},e.state={username:"",room:"",redirect:!1},e}return Object(r.a)(s,[{key:"render",value:function(){return this.state.redirect?Object(j.jsx)(h.a,{to:"/room/"+this.state.room+"/"+this.state.username}):Object(j.jsx)("div",{className:"container join-form",children:Object(j.jsxs)("div",{className:"col-lg-4 col-sm-12",children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Username"}),Object(j.jsx)("input",{className:"form-control",placeholder:"Enter Username",onChange:this.usernameTyped})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Room Id"}),Object(j.jsx)("input",{className:"form-control",placeholder:"Enter Room ID",onChange:this.roomTyped})]}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("button",{className:"form-control btn btn-warning",onClick:this.joinroom,children:"Join"})})]})})}}]),s}(n.a.Component),p=s(78),b=s.n(p),g=s(47),f=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).componentDidMount=function(){a.socket=b()("http://localhost:5000"),a.socket.emit("joinroom",a.userid),a.socket.on("occupants",(function(e){console.log(e),a.setState({occupants:e})})),a.socket.on("message_received",(function(e){console.log(e),a.setState({sms:a.state.sms.concat(e)})}))},a.messageTyped=function(e){a.setState({message:e.target.value})},a.sendMessage=function(){var e=new Date,t=e.getHours()+":"+e.getMinutes();a.socket.emit("message",{sender:a.userid,time:t,message:a.state.message})},a.state={occupants:[],message:null,sms:[]},a.roomid=a.props.match.params.roomid,a.userid=a.props.match.params.userid,a}return Object(r.a)(s,[{key:"render",value:function(){var e=this;return Object(j.jsx)("div",{className:"container-fluid",children:Object(j.jsxs)("div",{className:"row",style:{height:"100vh"},children:[Object(j.jsx)("div",{className:"col-3 contacts_col d-none d-lg-block",children:Object(j.jsx)("div",{children:Object(j.jsx)(g.a,{users:this.state.occupants})})}),Object(j.jsx)("div",{className:"col-lg-9 col-md-12",style:{padding:"0px"},children:Object(j.jsxs)("div",{className:"chat-col",children:[Object(j.jsxs)("div",{className:"chat-title shadow",children:[Object(j.jsx)("div",{className:"chatDP_frame"}),Object(j.jsxs)("div",{style:{alignSelf:"center",paddingLeft:"10px"},children:[Object(j.jsx)("h5",{style:{marginBottom:"0px"},children:this.roomid}),Object(j.jsxs)("label",{style:{fontSize:"smaller"},children:[this.state.occupants.length," Online"]})]})]}),Object(j.jsx)("div",{className:"chat-messages",children:this.state.sms.map((function(t,s){console.log(t.sender,e.userid);var a=t.sender!==e.userid?"left":"right-bubble";return Object(j.jsx)("div",{className:a,children:Object(j.jsx)("div",{children:Object(j.jsxs)("div",{children:[Object(j.jsxs)("label",{className:"bubble-message-name",children:[t.sender," \xb7 ",t.time]}),Object(j.jsx)("div",{className:"bubble sender shadow",children:Object(j.jsx)("label",{className:"bubble-message",children:t.message})})]},s)})},s)}))}),Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:"input-group message-input",children:[Object(j.jsx)("input",{type:"text",className:"form-control",style:{height:"50px"},placeholder:"Enter Message",onChange:this.messageTyped}),Object(j.jsx)("div",{className:"input-group-append",children:Object(j.jsx)("button",{className:"btn btn-primary",type:"button",onClick:this.sendMessage,children:"Send"})})]})})]})})]})})}}]),s}(n.a.Component),x=s(40),v=s.n(x),O=s(48),N=s(13),y=s(39),S=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(){var e;return Object(l.a)(this,s),(e=t.call(this)).usernameTyped=function(t){e.setState({username:t.target.value})},e.emailTyped=function(t){e.setState({email:t.target.value})},e.passTyped=function(t){e.setState({pass:t.target.value})},e.register=function(){e.setState({btnStatus:"Registering",btnClass:"btn-success"}),N.a.auth().createUserWithEmailAndPassword(e.state.email,e.state.pass).then(function(){var t=Object(O.a)(v.a.mark((function t(s){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=s.user,t.next=3,e.addUserData(a.uid,e.state.username);case 3:e.setState({btnStatus:"Registered",btnClass:"btn-success"});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.setState({error:t})}))},e.addUserData=function(e,t){return new Promise((function(s,a){var n=new Date;N.a.database().ref("users/"+e).set({joined:n.getTime(),displayName:t},(function(e){s(e?{status:"500",message:e}:{status:"200",message:"Registered"})}))}))},e.fileUpload=function(t){var s=t.target.files[0];e.getBase64(s,(function(e){console.log("base64",e)}))},e.state={username:null,email:null,pass:null,room:"",redirect:!1,btnStatus:"Register",btnClass:"btn btn-primary",login:!1},e}return Object(r.a)(s,[{key:"getBase64",value:function(e,t){var s=new FileReader;s.readAsDataURL(e),s.onload=function(){t(s.result)},s.onerror=function(e){console.log("Error: ",e)}}},{key:"render",value:function(){var e=this;return"Registered"===this.state.btnStatus?Object(j.jsx)(h.a,{to:"/chats"}):this.state.login?Object(j.jsx)(h.a,{to:"/login"}):Object(j.jsx)("div",{className:"container join-form",children:Object(j.jsxs)("div",{className:"col-lg-6 col-sm-12",children:[Object(j.jsx)("div",{style:{textAlign:"center"},children:Object(j.jsx)("h3",{className:"title_font",children:"Instance"})}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-lg-6 col-sm-12",style:{alignSelf:"center"},children:Object(j.jsxs)("div",{style:{textAlign:"center"},children:[Object(j.jsx)("img",{id:"UserDP",alt:"DP",className:"updateDP",src:y.a}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{className:"btn btn-outline-light changeDP",children:"Change Profile Picture"})})]})}),Object(j.jsxs)("div",{className:"col-lg-6 col-sm-12",children:[Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{className:"form-control",placeholder:"Username",onChange:this.usernameTyped})}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{className:"form-control",placeholder:"Email ID",onChange:this.emailTyped})}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{className:"form-control",placeholder:"Password",onChange:this.passTyped})}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("button",{className:"form-control "+this.state.btnClass,onClick:this.register,children:this.state.btnStatus})}),this.state.error&&Object(j.jsx)("div",{className:"form-group error-card",children:Object(j.jsx)("p",{className:"paragraphs",children:this.state.error.message})}),Object(j.jsxs)("div",{className:"form-group signup-card",children:[Object(j.jsx)("p",{className:"paragraphs",children:"Already a member? "}),Object(j.jsx)("label",{role:"button",style:{color:"#0056b3",cursor:"pointer"},onClick:function(){return e.setState({login:!0})},children:"Log in"})]})]})]})]})})}}]),s}(n.a.Component),w=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(){var e;return Object(l.a)(this,s),(e=t.call(this)).emailTyped=function(t){e.setState({email:t.target.value})},e.passTyped=function(t){e.setState({pass:t.target.value})},e.login=function(){e.setState({btnStatus:"Logging in",btnClass:"btn btn-success",error:null}),N.a.auth().signInWithEmailAndPassword(e.state.email,e.state.pass).then((function(t){e.setState({redirect:!0})})).catch((function(t){e.setState({btnStatus:"Log in",btnClass:"btn btn-primary"}),e.setState({error:t})}))},e.componentDidMount=function(){},e.state={email:null,pass:null,redirect:!1,btnStatus:"Log in",btnClass:" btn btn-primary",error:null,signup:!1},e}return Object(r.a)(s,[{key:"render",value:function(){var e=this;return this.state.redirect?Object(j.jsx)(h.a,{to:"/chats/"}):this.state.signup?Object(j.jsx)(h.a,{to:"/signup/"}):Object(j.jsx)("div",{className:"container join-form",children:Object(j.jsxs)("div",{className:"col-lg-4 col-sm-12",children:[Object(j.jsx)("div",{style:{textAlign:"center"},children:Object(j.jsx)("h1",{className:"title_font",children:"Instance"})}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{className:"form-control login-input-field",placeholder:"Email ID",onChange:this.emailTyped})}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{type:"password",className:"form-control login-input-field",placeholder:"Password",onChange:this.passTyped})}),this.state.error&&Object(j.jsx)("div",{className:"form-group error-card",children:Object(j.jsx)("p",{className:"paragraphs",children:this.state.error.message})}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("button",{className:"form-control "+this.state.btnClass,onClick:this.login,children:this.state.btnStatus})}),Object(j.jsxs)("div",{className:"form-group signup-card",children:[Object(j.jsx)("p",{className:"paragraphs",children:"Don't have an account? "}),Object(j.jsx)("label",{role:"button",style:{color:"#0056b3",cursor:"pointer"},onClick:function(){return e.setState({signup:!0})},children:"Sign up"})]})]})})}}]),s}(n.a.Component),C=s(79),M=function(e){Object(o.a)(s,e);var t=Object(d.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(r.a)(s,[{key:"render",value:function(){return Object(j.jsx)(u.a,{children:Object(j.jsxs)(h.d,{children:[Object(j.jsx)(h.b,{exact:!0,path:"/",children:Object(j.jsx)(h.a,{to:"/chats"})}),Object(j.jsx)(h.b,{path:"/join",component:m}),Object(j.jsx)(h.b,{path:"/signup",component:S}),Object(j.jsx)(h.b,{path:"/login",component:w}),Object(j.jsx)(h.b,{path:"/chats",component:C.a}),Object(j.jsx)(h.b,{path:"/room/:roomid/:userid",component:f})]})})}}]),s}(n.a.Component);i.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(M,{})}),document.getElementById("root"))},23:function(e,t,s){},39:function(e,t,s){"use strict";t.a=s.p+"static/media/pew.bbd2dc17.jpg"},47:function(e,t,s){"use strict";(function(e){var a=s(7),n=s(8),c=s(11),i=s(10),l=s(3),r=s.n(l),o=s(29),d=s.n(o),u=s(1),h=function(t){Object(c.a)(l,t);var s=Object(i.a)(l);function l(){var t;return Object(a.a)(this,l),(t=s.call(this)).b64decode=function(t){return new e(t,"base64").toString()},t.select=function(e){console.log(e),t.setState({selected:e}),t.props.setRec(e)},t.state={selected:null},t}return Object(n.a)(l,[{key:"render",value:function(){var e=this;return Object(u.jsx)("div",{className:"col-12 messages_list_group",children:0===this.props.users.length?Object(u.jsx)("div",{style:{textAlign:"center"},children:Object(u.jsx)("h5",{children:Object(u.jsx)("span",{className:"badge badge-danger",children:"No Chats Found"})})}):Object(u.jsx)("div",{className:"messages-list",children:this.props.users.map((function(t,s){var a=Object.entries(e.props.chatData[t.id]).length,n=Object.entries(e.props.chatData[t.id])[a-1][1].text,c="row messages_list_item shadow";e.props.recipient===t&&(c+=" gradient-list");var i=n;try{var l=e.b64decode(n);i=d.a.AES.decrypt(l,t.sharedKey).toString(d.a.enc.Utf8)}catch(r){console.log(r)}return n.length>35&&(n=n.slice(0,35)+"..."),Object(u.jsxs)("div",{id:"message-list-"+t.id,onClick:function(){return e.select(t)},className:c,children:[Object(u.jsx)("div",{className:"col-2",style:{padding:"0px"},children:Object(u.jsx)("img",{alt:"DP",className:"listDP",src:t.displayPicture})}),Object(u.jsxs)("div",{className:"col-10",style:{alignSelf:"center"},children:[Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-12",children:Object(u.jsx)("p",{className:"message-list-name",children:t.displayName})}),Object(u.jsx)("div",{className:"col",children:Object(u.jsx)("div",{className:"time",children:Object(u.jsx)("p",{style:{marginBottom:"0px"},children:i})})})]}),"request"!==e.props.type&&Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col",children:Object(u.jsx)("label",{className:"prev_message",children:"Good Morning! Good Morning!"})})})]})]},s)}))})})}}]),l}(r.a.Component);t.a=h}).call(this,s(45).Buffer)},49:function(e,t,s){"use strict";t.a=s.p+"static/media/logo.6bcee72e.png"},79:function(e,t,s){"use strict";(function(e){var a=s(7),n=s(8),c=s(11),i=s(10),l=s(3),r=s.n(l),o=(s(23),s(13)),d=s(86),u=s(29),h=s.n(u),j=s(87),m=s(83),p=s(1),b=function(t){Object(c.a)(l,t);var s=Object(i.a)(l);function l(t){var n;return Object(a.a)(this,l),(n=s.call(this,t)).setUploading=function(e){console.log(e),n.setState({uploading:e})},n.setPrivate=function(t){var s=new e(t);n.setState({private:s.toString("base64")}),localStorage.private=s.toString("base64"),n.renderFriends(n.state.user),n.getChats()},n.setMenu=function(e){switch(e){case"Chats":n.setState({menu:"Chats",recipient:null});break;case"Add Friends":n.setState({menu:"Add Friends"});break;case"Posts":n.setState({menu:"Posts"});break;case"Settings":n.setState({menu:"Settings"});break;default:n.setState({menu:"Chats",recipient:null})}},n.setWall=function(e){n.setState({recipient:e,ChatScreenClass:"col-lg-9",MessageListClass:"col-lg-3 col-sm-12 contacts_col d-none d-lg-block"}),o.a.database().ref("posts/"+e.id).on("value",(function(t){t.val()?n.setState({wallData:t.val(),wall:e}):n.setState({wallData:"None",wall:e})}))},n.unSetWall=function(){n.setState({recipient:null,wallData:"None",wall:null,ChatScreenClass:"col-lg-9 d-none d-lg-block",MessageListClass:"col-lg-3 col-sm-12 contacts_col"})},n.setRec=function(e){n.setState({recipient:e,menu:"Chats",ChatScreenClass:"col-lg-9",MessageListClass:"col-lg-3 col-sm-12 contacts_col d-none d-lg-block"})},n.unSetRec=function(){n.setState({recipient:null,menu:"Chats",ChatScreenClass:"col-lg-9 d-none d-lg-block",MessageListClass:"col-lg-3 col-sm-12 contacts_col"})},n.setSettings=function(e){n.setState({settingsMenu:e,ChatScreenClass:"col-lg-9",MessageListClass:"col-lg-3 col-sm-12 contacts_col d-none d-lg-block"})},n.unSetSettings=function(){n.setState({settingsMenu:null,ChatScreenClass:"col-lg-9 d-none d-lg-block",MessageListClass:"col-lg-3 col-sm-12 contacts_col"})},n.mapMode=function(){n.setState({menu:"Friends-Map",recipient:null,ChatScreenClass:"col-lg-9",MessageListClass:"col-lg-3 col-sm-12 contacts_col d-none d-lg-block"})},n.unSetMapMode=function(){n.setState({recipient:null,menu:"Chats",ChatScreenClass:"col-lg-9 d-none d-lg-block",MessageListClass:"col-lg-3 col-sm-12 contacts_col"})},n.logout=function(){o.a.auth().signOut().then((function(){})).catch((function(e){}))},n.addRecord=function(e){var t=new Date;t=t.getTime(),o.a.database().ref("users/"+n.state.user.uid+"/friends/"+e).set({time:t},(function(e){})),o.a.database().ref("users/"+e+"/friends/"+n.state.user.uid).set({time:t},(function(e){}))},n.searchUsers=function(){n.setState({searched:null,error:null}),fetch("https://garnet-gregarious-robe.glitch.me/SearchUserByMail?email="+n.state.fid).then((function(e){return e.json()})).then((function(e){200===e.status?n.setState({searched:e.record}):404===e.status&&n.setState({error:"User Not Found"})}))},n.b64encode=function(t){return new e(t).toString("base64")},n.addFriend=function(){fetch("https://garnet-gregarious-robe.glitch.me/AddFriend?uid="+n.state.user.uid+"&fid="+n.state.searched.uid).then((function(e){return e.json()})).then((function(e){if(200===e.status){var t=new Date,s=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),c=t.getFullYear(),i="Friends from ";i+=t=a+"/"+s+"/"+c;var l=h.a.AES.encrypt(i,"iamironman").toString();l=n.b64encode(l),fetch("https://garnet-gregarious-robe.glitch.me/send?from="+n.state.user.uid+"&to="+n.state.searched.uid+"&type=welcome&message="+l).then((function(e){return e.json()})).then((function(e){200===e.status?n.setState({addFriendStatus:"Added",addFriendClass:"btn btn-success"}):404===e.status&&console.error(e)}))}else 404===e.status&&n.setState("Error")}))},n.occupantDupe=function(e){for(var t=0;t<n.state.occupants.length;t++)if(n.state.occupants[t].id===e)return 1;return 0},n.renderFriends=function(e){o.a.database().ref("users/"+e.uid+"/friends").on("value",(function(e){if(e.val()){var t=e.val(),s=Object.entries(t);for(var a in s)fetch("https://garnet-gregarious-robe.glitch.me/FetchUser?uid="+s[a][0]+"&pass="+n.state.private).then((function(e){return e.json()})).then((function(e){200===e.status?n.occupantDupe(e.record.uid)||n.setState({occupants:n.state.occupants.concat({id:e.record.uid,displayName:e.record.displayName,displayPicture:e.record.photoURL,sharedKey:e.key})}):e.status}))}}))},n.getChats=function(){var e=o.a.database().ref("users/"+n.state.user.uid+"/messages/");e.on("value",(function(e){n.setState({chatData:e.val()})})),e.on("child_changed",(function(e){n.state.recipient&&n.state.recipient.id;e.key}))},n.success=function(e){var t=e.coords;o.a.database().ref("location/"+n.state.user.uid).set({latitude:t.latitude,longitude:t.longitude})},n.errors=function(e){console.warn("ERROR(".concat(e.code,"): ").concat(e.message))},n.getLocation=function(){if(navigator.geolocation){var e={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};navigator.permissions.query({name:"geolocation"}).then((function(t){"granted"===t.state?navigator.geolocation.getCurrentPosition(n.success):"prompt"===t.state?navigator.geolocation.getCurrentPosition(n.success,n.errors,e):t.state,t.onchange=function(){}}))}else alert("Sorry Not available!")},n.componentDidMount=function(){o.a.auth().onAuthStateChanged((function(e){e?(n.setState({user:e}),n.state.private&&(n.renderFriends(e),n.getChats())):n.props.history.push("/login")}))},n.fidTyped=function(e){n.setState({fid:e.target.value})},n.state={user:null,occupants:[],message:null,sms:[],fid:"",recipient:null,menu:"Chats",searched:null,error:null,friends:null,settingsMenu:null,chatData:null,wall:null,wallData:null,addFriendStatus:"Add",addFriendClass:"btn btn-primary",ChatScreenClass:"col-lg-9 d-none d-lg-block",MessageListClass:"col-lg-3 col-sm-12 contacts_col",private:localStorage.private,uploading:!1},n}return Object(n.a)(l,[{key:"render",value:function(){return this.state.user&&this.state.occupants.length&&this.state.private?Object(p.jsx)("div",{className:"col",children:Object(p.jsxs)("div",{className:"row",style:{height:"100vh"},children:[Object(p.jsx)(j.a,{recipient:this.state.recipient,MessageListClass:this.state.MessageListClass,setMenu:this.setMenu,mapMode:this.mapMode,menu:this.state.menu,occupants:this.state.occupants,setRec:this.setRec,chatData:this.state.chatData,user:this.state.user,friends:this.state.occupants,setWall:this.setWall,setSettings:this.setSettings,logout:this.logout,fidTyped:this.fidTyped,fid:this.state.fid,searchUsers:this.searchUsers,searched:this.state.searched,addFriend:this.addFriend,addFriendClass:this.state.addFriendClass,addFriendStatus:this.state.addFriendStatus,error:this.state.error,setUploading:this.setUploading}),Object(p.jsx)(d.a,{ChatScreenClass:this.state.ChatScreenClass,menu:this.state.menu,recipient:this.state.recipient,user:this.state.user,chatData:this.state.chatData,wall:this.state.wall,wallData:this.state.wallData,settingsMenu:this.state.settingsMenu,unSetRec:this.unSetRec,unSetMapMode:this.unSetMapMode,unSetWall:this.unSetWall,unSetSettings:this.unSetSettings,uploading:this.state.uploading})]})}):Object(p.jsx)(m.a,{private:this.state.private,setPrivate:this.setPrivate})}}]),l}(r.a.Component);t.a=b}).call(this,s(45).Buffer)},80:function(e,t,s){"use strict";(function(e){var a=s(7),n=s(8),c=s(11),i=s(10),l=s(3),r=s.n(l),o=s(13),d=(s(23),s(81)),u=s(29),h=s.n(u),j=s(1),m=function(t){Object(c.a)(l,t);var s=Object(i.a)(l);function l(t){var n;return Object(a.a)(this,l),(n=s.call(this,t)).scrollToBottom=function(){n.messagesEnd.scrollIntoView({behavior:"smooth"})},n.messageTyped=function(e){n.setState({message:e.target.value})},n.b64encode=function(t){return new e(t).toString("base64")},n.b64decode=function(t){return new e(t,"base64").toString()},n.sendMessage=function(){var e=h.a.AES.encrypt(n.state.message,n.props.name.sharedKey).toString();e=n.b64encode(e),n.setState({sent:!0}),fetch("https://garnet-gregarious-robe.glitch.me/send?from="+n.props.userid+"&to="+n.props.name.id+"&message="+e+"&type=chat").then((function(e){return e.json()})).then((function(e){200===e.status?n.setState({message:""}):404===e.status&&console.error(e)}))},n.ren=function(){n.chats=o.a.database().ref("users/"+n.props.userid+"/messages/"+n.props.name.id);var e=[];n.chats.on("child_added",(function(t){var s=t.val(),a=new Date(s.time).toLocaleTimeString(),c={sender:s.from,time:a,message:s.text};e.concat(c),n.setState({messages:n.state.messages.concat(c)})})),n.scrollToBottom()},n.componentDidMount=function(){n.audioEl=document.getElementById("tone"),n.scrollToBottom()},n.state={message:"",messages:[],sent:!1},n}return Object(n.a)(l,[{key:"componentDidUpdate",value:function(e,t){e.data!==this.props.data&&(console.log("sent",this.state.sent),!0===this.state.sent?this.setState({sent:!1}):this.audioEl.play()),this.scrollToBottom()}},{key:"render",value:function(){var e=this;return console.log(this.props.name.sharedKey),Object(j.jsxs)("div",{className:"chat-col",children:[Object(j.jsx)("audio",{id:"tone",className:"audio-element",children:Object(j.jsx)("source",{src:d.a})}),Object(j.jsxs)("div",{className:"chat-title shadow",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(j.jsx)("div",{onClick:function(){return e.props.unSetRec()},children:Object(j.jsx)("svg",{className:"sidebar-icons",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 492 492",children:Object(j.jsx)("path",{d:"M198.608 246.104L382.664 62.04c5.068-5.056 7.856-11.816 7.856-19.024 0-7.212-2.788-13.968-7.856-19.032l-16.128-16.12C361.476 2.792 354.712 0 347.504 0s-13.964 2.792-19.028 7.864L109.328 227.008c-5.084 5.08-7.868 11.868-7.848 19.084-.02 7.248 2.76 14.028 7.848 19.112l218.944 218.932c5.064 5.072 11.82 7.864 19.032 7.864 7.208 0 13.964-2.792 19.032-7.864l16.124-16.12c10.492-10.492 10.492-27.572 0-38.06L198.608 246.104z"})})}),Object(j.jsx)("div",{className:"chatDP_frame",children:Object(j.jsx)("img",{alt:"DP",className:"chatDP",src:this.props.name.displayPicture})}),Object(j.jsx)("div",{style:{display:"block",alignSelf:"center",paddingLeft:"10px",flexGrow:"1"},children:Object(j.jsx)("h5",{className:"recepient_name",style:{marginBottom:"0px"},children:this.props.name.displayName})})]}),Object(j.jsxs)("div",{className:"chat-messages",children:[Object.entries(this.props.data[this.props.name.id]).map((function(t,s){var a=t[1],n=new Date(a.time).toLocaleTimeString(),c="bubble sender shadow",i=a.from!==e.props.userid?"left":"right-bubble";"welcome"===a.type?(i="center-bubble",c="bubble welcomeBubble shadow"):c="bubble sender shadow",console.log(t);var l=a.text;try{var r=e.b64decode(a.text);l=h.a.AES.decrypt(r,e.props.name.sharedKey).toString(h.a.enc.Utf8)}catch(o){console.log(o)}return Object(j.jsx)("div",{className:i,children:Object(j.jsxs)("div",{children:["welcome"===i&&Object(j.jsx)("label",{className:"bubble-message-name",children:n}),Object(j.jsx)("div",{className:c,children:Object(j.jsx)("label",{className:"bubble-message",children:l})})]},s)},s)})),Object(j.jsx)("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}})]}),Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:"input-group message-input",children:[Object(j.jsx)("input",{type:"text",className:"form-control",style:{height:"50px"},placeholder:"Enter Message",value:this.state.message,onChange:this.messageTyped}),Object(j.jsx)("div",{className:"input-group-append",children:Object(j.jsx)("button",{className:"btn btn-white",type:"button",onClick:this.sendMessage,children:Object(j.jsx)("svg",{fill:"black",height:30,viewBox:"0 0 24 24",width:30,xmlns:"http://www.w3.org/2000/svg",children:Object(j.jsx)("path",{d:"M8.75 17.612v4.638a.751.751 0 001.354.444l2.713-3.692zM23.685.139a.75.75 0 00-.782-.054l-22.5 11.75a.752.752 0 00.104 1.375l6.255 2.138 13.321-11.39L9.775 16.377l10.483 3.583a.753.753 0 00.984-.599l2.75-18.5a.751.751 0 00-.307-.722z"})})})})]})})]})}}]),l}(r.a.Component);t.a=m}).call(this,s(45).Buffer)},81:function(e,t,s){"use strict";t.a=s.p+"static/media/Tone.f4570310.mp3"},83:function(e,t,s){"use strict";var a=s(85),n=s(3),c=s(49),i=s(1);t.a=function(e){var t=Object(n.useState)(""),s=Object(a.a)(t,2),l=s[0],r=s[1];return Object(i.jsxs)("div",{className:"LoadingPage",children:[Object(i.jsx)("div",{children:Object(i.jsx)("img",{src:c.a,alt:"Loader",className:"loader"})}),!e.private&&Object(i.jsxs)("div",{className:"pinCont",children:[Object(i.jsx)("input",{className:"pin",placeholder:"Enter your Pin",value:l,onChange:function(e){return function(e){r(e.target.value)}(e)}}),Object(i.jsx)("button",{className:"pinSubmit",onClick:function(){e.setPrivate(l)},children:Object(i.jsx)("svg",{style:{fill:"#fff"},xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(i.jsx)("path",{d:"M14 2h-7.229l7.014 7h-13.785v6h13.785l-7.014 7h7.229l10-10z"})})})]})]})}},86:function(e,t,s){"use strict";var a=s(3),n=s.n(a),c=s(80),i=s(7),l=s(8),r=s(11),o=s(10),d=s(88),u=s(13),h=(s(23),s(1)),j=function(e){return Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:"map-marker",children:[Object(h.jsx)("img",{alt:"DP",src:e.dp,className:"map-marker-dp"}),Object(h.jsx)("span",{className:"badge badge-dark",style:{fontSize:"small"},children:e.text})]})})},m=function(e){Object(r.a)(s,e);var t=Object(o.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).fetchFriends=function(){fetch("https://garnet-gregarious-robe.glitch.me/friends?uid="+a.props.uid).then((function(e){return e.json()})).then((function(e){var t=[];e.map((function(e){u.a.database().ref("location/"+e.id).once("value",(function(s){s.val()&&(t=t.concat({id:e.id,displayName:e.displayName,displayPicture:e.displayPicture,location:s.val()}),a.setState({friends:t}))}))}))}))},a.componentDidMount=function(){a.fetchFriends()},a.state={message:null,messages:[],friends:[]},a}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"chat-col",style:{justifyContent:"center"},children:[Object(h.jsxs)("div",{className:"chat-title shadow",style:{display:"flex",alignItems:"center",justifyContent:"center",height:"75px",textAlign:"center"},children:[Object(h.jsx)("div",{onClick:function(){return e.props.unSetMapMode()},children:Object(h.jsx)("svg",{className:"sidebar-icons",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 492 492",children:Object(h.jsx)("path",{d:"M198.608 246.104L382.664 62.04c5.068-5.056 7.856-11.816 7.856-19.024 0-7.212-2.788-13.968-7.856-19.032l-16.128-16.12C361.476 2.792 354.712 0 347.504 0s-13.964 2.792-19.028 7.864L109.328 227.008c-5.084 5.08-7.868 11.868-7.848 19.084-.02 7.248 2.76 14.028 7.848 19.112l218.944 218.932c5.064 5.072 11.82 7.864 19.032 7.864 7.208 0 13.964-2.792 19.032-7.864l16.124-16.12c10.492-10.492 10.492-27.572 0-38.06L198.608 246.104z"})})}),Object(h.jsx)("div",{style:{display:"block",alignSelf:"center",paddingLeft:"10px",flexGrow:"1"},children:Object(h.jsx)("h5",{className:"recepient_name",style:{marginBottom:"0px"},children:"Maps"})})]}),Object(h.jsx)(d.a,{bootstrapURLKeys:{key:"AIzaSyB9DoWtMzN1UUmWdhqWJ9MSQQAMvC3pSww"},defaultCenter:{lat:11.01,lng:77},defaultZoom:12,children:this.state.friends.map((function(e,t){return console.log(e.location.latitude),Object(h.jsx)(j,{lat:e.location.latitude,lng:e.location.longitude,text:e.displayName,dp:e.displayPicture},e.id)}))})]})}}]),s}(n.a.Component);function p(e){var t,s=new Date,a=new Date(e.id.time),n=s.getTime()-a.getTime();return t=Math.round(n/864e5),Object(h.jsxs)("div",{className:"row messages_list_item shadow",children:[Object(h.jsx)("div",{className:"col-4",style:{padding:"0px"},children:Object(h.jsx)("img",{alt:"DP",className:"friend-tile",src:e.id.displayPicture})}),Object(h.jsxs)("div",{className:"col-8",style:{alignSelf:"center"},children:[Object(h.jsx)("label",{className:"friends-list-name",children:e.id.displayName}),Object(h.jsx)("label",{className:"",style:{display:"block"},children:e.id.email}),Object(h.jsx)("label",{className:"badge badge-pill badge-danger",children:" \u2665 "+t+" Days"})]})]})}function b(e){return e.friends?Object(h.jsx)("div",{className:"row",children:e.friends.map((function(e,t){return Object(h.jsx)("div",{className:"col-6",children:Object(h.jsx)(p,{id:e})},e.id)}))}):Object(h.jsx)(h.Fragment,{children:"Loading"})}var g=function(e){Object(r.a)(s,e);var t=Object(o.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).fetchFriends=function(){fetch("https://garnet-gregarious-robe.glitch.me/friends?uid="+a.props.uid).then((function(e){return e.json()})).then((function(e){a.setState({friends:e,length:e.length})}))},a.componentDidMount=function(){a.fetchFriends()},a.state={friends:[],length:0},a}return Object(l.a)(s,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:"chat-col",children:[Object(h.jsxs)("div",{className:"chat-title shadow",style:{display:"flex",alignItems:"center",padding:"15px"},children:[Object(h.jsx)("div",{children:Object(h.jsx)("svg",{style:{width:"50px"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Object(h.jsx)("path",{d:"M155.327 57.142c-51.531 0-93.454 44.45-93.454 99.086 0 54.636 41.923 99.086 93.454 99.086s93.455-44.45 93.455-99.086c0-54.636-41.923-99.086-93.455-99.086zM367.798 71.321l-.636.002c-21.626.179-41.826 9.31-56.878 25.713-14.788 16.113-22.829 37.37-22.644 59.854.186 22.484 8.577 43.605 23.628 59.473 15.17 15.991 35.265 24.773 56.651 24.773l.646-.002c21.626-.179 41.826-9.311 56.878-25.713 14.788-16.113 22.829-37.37 22.644-59.855-.385-46.594-36.34-84.245-80.289-84.245zM371.74 257.358h-7.76c-36.14 0-69.12 13.74-94.02 36.26a180.71 180.71 0 0117.78 15.61c16.58 16.58 29.6 35.9 38.7 57.42 8.2 19.38 12.88 39.8 13.97 60.83H512v-29.87c0-77.33-62.92-140.25-140.26-140.25zM310.35 427.478c-2.83-45.59-25.94-85.69-60.43-111.39-25.09-18.7-56.21-29.77-89.92-29.77h-9.34C67.45 286.319 0 353.768 0 436.978v17.88h310.65v-17.88c0-3.19-.1-6.36-.3-9.5z"})})}),Object(h.jsxs)("div",{style:{alignSelf:"center",paddingLeft:"10px",flexGrow:"1"},children:[Object(h.jsx)("h5",{className:"recepient_name",style:{marginBottom:"0px"},children:"Friends List"}),Object(h.jsxs)("label",{style:{fontSize:"smaller",marginBottom:"0px"},children:[this.state.length," Friends"]})]})]}),Object(h.jsx)("div",{className:"col",style:{overflowY:"scroll"},children:Object(h.jsx)(b,{friends:this.state.friends})})]})}}]),s}(n.a.Component),f=s(39),x=function(e){Object(r.a)(s,e);var t=Object(o.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).usernameTyped=function(e){a.setState({username:e.target.value})},a.emailTyped=function(e){a.setState({email:e.target.value})},a.oldPassTyped=function(e){a.setState({oldPass:e.target.value})},a.newPassTyped=function(e){a.setState({newPass:e.target.value})},a.fetchUserData=function(){a.setState({searched:null,error:null}),fetch("https://garnet-gregarious-robe.glitch.me/FetchUser?uid="+a.props.uid).then((function(e){return e.json()})).then((function(e){200===e.status?(a.setState({record:e.record,username:e.record.displayName,email:e.record.email}),u.a.storage().ref("dp/"+a.props.uid+".jpg").getDownloadURL().then((function(e){a.setState({downloadUrl:e})})).catch((function(e){console.log(e)}))):404===e.status&&a.setState({error:"User Not Found"})}))},a.componentDidMount=function(){a.fetchUserData()},a.fileUpload=function(e){a.setState({dpStatus:"Uploading"});var t=e.target.files[0];a.getBase64(t,(function(e){console.log("base64 Loaded"),document.getElementById("UserDP").src=e}));var s=u.a.storage().ref().child("dp/"+a.props.uid+".jpg").put(t);s.on("state_changed",(function(e){}),(function(e){}),(function(){s.snapshot.ref.getDownloadURL().then((function(e){u.a.auth().currentUser.updateProfile({photoURL:e}).then((function(){console.log("Saved at",e),a.setState({dpStatus:"Uploaded",dpClass:"btn btn-success"})})).catch((function(e){console.log("error",e)}))}))}))},a.updateProfile=function(){fetch("https://garnet-gregarious-robe.glitch.me/UpdateUser?uid="+a.props.uid+"&displayName="+a.state.username+"&email="+a.state.email).then((function(e){return e.json()})).then((function(e){200===e.status?a.setState({status:{class:"btn btn-success",text:"Updated"},record:e.record,username:e.record.displayName,email:e.record.email}):404===e.status&&a.setState({error:"User Not Found"})}))},a.updatePass=function(){fetch("https://garnet-gregarious-robe.glitch.me/UpdatePass?uid="+a.props.uid+"&oldPass="+a.state.oldPass+"&newPass="+a.state.newPass).then((function(e){return e.json()})).then((function(e){200===e.status?(console.log("Success"),a.setState({PassStatus:{class:"btn btn-success",text:"Updated"}})):404===e.status&&a.setState({error:"User Not Found"})}))},a.state={message:null,messages:[],record:{displayName:null,email:null,photoURL:null},downloadUrl:f.a,username:null,email:null,oldPass:null,newPass:null,status:{text:"Update",class:"btn btn-primary"},PassStatus:{text:"Change Password",class:"btn btn-danger"},dpStatus:"Change Profile Picture",dpClass:"btn btn-warning"},a}return Object(l.a)(s,[{key:"getBase64",value:function(e,t){var s=new FileReader;s.readAsDataURL(e),s.onload=function(){t(s.result)},s.onerror=function(e){console.log("Error: ",e)}}},{key:"render",value:function(){var e,t=this;return e="Edit"===this.props.menu?"Edit Profile":"Change Password",Object(h.jsxs)("div",{className:"chat-col",children:[this.props.menu?Object(h.jsxs)("div",{className:"chat-title shadow",style:{display:"flex",alignItems:"center",justifyContent:"center",height:"75px",textAlign:"center"},children:[Object(h.jsx)("div",{onClick:function(){return t.props.unSetSettings()},children:Object(h.jsx)("svg",{className:"sidebar-icons",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 492 492",children:Object(h.jsx)("path",{d:"M198.608 246.104L382.664 62.04c5.068-5.056 7.856-11.816 7.856-19.024 0-7.212-2.788-13.968-7.856-19.032l-16.128-16.12C361.476 2.792 354.712 0 347.504 0s-13.964 2.792-19.028 7.864L109.328 227.008c-5.084 5.08-7.868 11.868-7.848 19.084-.02 7.248 2.76 14.028 7.848 19.112l218.944 218.932c5.064 5.072 11.82 7.864 19.032 7.864 7.208 0 13.964-2.792 19.032-7.864l16.124-16.12c10.492-10.492 10.492-27.572 0-38.06L198.608 246.104z"})})}),Object(h.jsx)("div",{style:{display:"block",alignSelf:"center",paddingLeft:"10px",flexGrow:"1"},children:Object(h.jsx)("h5",{className:"recepient_name",style:{marginBottom:"0px"},children:e})})]}):Object(h.jsx)("div",{style:{textAlign:"center"},children:Object(h.jsx)("h1",{className:"title_font",style:{color:"black",fontSize:"100px"},children:"Settings"})}),"Edit"===this.props.menu&&Object(h.jsxs)("div",{className:"update-form",children:[Object(h.jsxs)("div",{style:{textAlign:"center"},children:[Object(h.jsx)("img",{id:"UserDP",alt:"DP",className:"updateDP",src:this.state.downloadUrl}),Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{hidden:!0,id:"icon-button-file",type:"file",onChange:this.fileUpload}),Object(h.jsx)("label",{htmlFor:"icon-button-file",className:this.state.dpClass,style:{marginTop:"10px"},children:this.state.dpStatus})]})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Username"}),Object(h.jsx)("input",{className:"form-control",placeholder:"Enter Username",value:this.state.username,onChange:this.usernameTyped}),Object(h.jsx)("small",{id:"usernameHelp",className:"form-text text-muted",children:"Should only contain letters and be within 30 characters."})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Email ID"}),Object(h.jsx)("input",{type:"email",className:"form-control",placeholder:"Enter email",value:this.state.email,onChange:this.emailTyped}),Object(h.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"Should be a valid email address."})]}),Object(h.jsx)("div",{style:{textAlign:"end"},children:Object(h.jsx)("button",{type:"submit",className:this.state.status.class,onClick:this.updateProfile,children:this.state.status.text})})]}),"password"===this.props.menu&&Object(h.jsxs)("div",{className:"update-form",children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Old Password"}),Object(h.jsx)("input",{type:"password",className:"form-control",placeholder:"New Password",onChange:this.oldPassTyped}),Object(h.jsx)("small",{id:"passwordHelp",className:"form-text text-muted",children:"Should have more than 8 characters."})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"New Password"}),Object(h.jsx)("input",{type:"password",className:"form-control",placeholder:"New Password",onChange:this.newPassTyped}),Object(h.jsx)("small",{id:"passwordHelp",className:"form-text text-muted",children:"Should have more than 8 characters."})]}),Object(h.jsx)("div",{style:{textAlign:"end"},children:Object(h.jsx)("button",{type:"submit",className:this.state.PassStatus.class,onClick:this.updatePass,children:this.state.PassStatus.text})})]})]})}}]),s}(n.a.Component);function v(e){new Date(e.time);return Object(h.jsx)("div",{className:"post",children:Object(h.jsx)("img",{alt:"post",className:"post-image",src:e.postURL})})}var O=function(e){Object(r.a)(s,e);var t=Object(o.a)(s);function s(){return Object(i.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"col chat-col",style:{overflowY:"scroll"},children:[!this.props.name&&Object(h.jsx)("div",{style:{textAlign:"center"},children:Object(h.jsx)("h1",{className:"title_font",style:{color:"black",fontSize:"100px"},children:"Posts"})}),this.props.name&&Object(h.jsxs)("div",{className:"chat-col",children:[Object(h.jsxs)("div",{className:"chat-title shadow",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(h.jsx)("div",{onClick:function(){return e.props.unSetWall()},children:Object(h.jsx)("svg",{className:"sidebar-icons",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 492 492",children:Object(h.jsx)("path",{d:"M198.608 246.104L382.664 62.04c5.068-5.056 7.856-11.816 7.856-19.024 0-7.212-2.788-13.968-7.856-19.032l-16.128-16.12C361.476 2.792 354.712 0 347.504 0s-13.964 2.792-19.028 7.864L109.328 227.008c-5.084 5.08-7.868 11.868-7.848 19.084-.02 7.248 2.76 14.028 7.848 19.112l218.944 218.932c5.064 5.072 11.82 7.864 19.032 7.864 7.208 0 13.964-2.792 19.032-7.864l16.124-16.12c10.492-10.492 10.492-27.572 0-38.06L198.608 246.104z"})})}),Object(h.jsx)("div",{className:"chatDP_frame",children:Object(h.jsx)("img",{alt:"DP",className:"chatDP",src:this.props.name.displayPicture})}),Object(h.jsx)("div",{style:{display:"block",alignSelf:"center",paddingLeft:"10px",flexGrow:"1"},children:Object(h.jsx)("h5",{className:"recepient_name",style:{marginBottom:"0px"},children:this.props.name.displayName})})]}),this.props.wallData&&"None"!==this.props.wallData&&Object(h.jsx)("div",{className:"col chat-messages",children:Object(h.jsx)("div",{className:"imageGrid",children:Object.entries(this.props.wallData).map((function(t,s){return Object(h.jsx)(v,{postURL:t[1].image,time:t[1].time,name:e.props.wall.displayName},t[1].image)}))})}),"None"===this.props.wallData&&Object(h.jsx)("div",{className:"chat-col",style:{justifyContent:"center"},children:Object(h.jsx)("div",{style:{textAlign:"center"},children:Object(h.jsx)("h2",{className:"badge badge-danger",style:{fontSize:"20px",marginTop:"-25px",fontStyle:"italic"},children:"No Posts Yet!"})})})]})]})}}]),s}(n.a.Component),N=s(49),y=function(e){switch(e.menu){case"Chats":return e.recipient?Object(h.jsx)(c.a,{name:e.recipient,userid:e.user.uid,data:e.chatData,unSetRec:e.unSetRec}):Object(h.jsx)("div",{className:"chat-col",style:{justifyContent:"center"},children:Object(h.jsxs)("div",{style:{textAlign:"center"},children:[Object(h.jsx)("h1",{className:"title_font",style:{color:"black",fontSize:"100px"},children:"Chats"}),Object(h.jsx)("h2",{style:{fontSize:"20px",marginTop:"-25px",fontStyle:"italic"},children:"Click a friend to view his Chats"})]})});case"Friends-Map":return Object(h.jsx)(m,{uid:e.user.uid,unSetMapMode:e.unSetMapMode});case"Add Friends":return Object(h.jsx)(g,{uid:e.user.uid});case"Posts":return Object(h.jsx)(O,{name:e.recipient,uid:e.user.uid,wall:e.wall,wallData:e.wallData,unSetWall:e.unSetWall});case"Settings":return Object(h.jsx)(x,{uid:e.user.uid,menu:e.settingsMenu,unSetSettings:e.unSetSettings});default:return Object(h.jsx)(h.Fragment,{})}};t.a=function(e){return Object(h.jsxs)("div",{className:e.ChatScreenClass,style:{padding:"0px"},children:[e.uploading&&Object(h.jsxs)("div",{className:"upload",children:[Object(h.jsx)("div",{children:Object(h.jsx)("img",{src:N.a,alt:"Loader",className:"loader"})}),Object(h.jsx)("label",{children:"Uploading..."})]}),Object(h.jsx)(y,{ChatScreenClass:e.ChatScreenClass,menu:e.menu,recipient:e.recipient,user:e.user,chatData:e.chatData,wall:e.wall,wallData:e.wallData,settingsMenu:e.settingsMenu,unSetRec:e.unSetRec,unSetMapMode:e.unSetMapMode,unSetWall:e.unSetWall,unSetSettings:e.unSetSettings})]})}},87:function(e,t,s){"use strict";var a=s(3),n=s.n(a),c=s(47),i=s(40),l=s.n(i),r=s(48),o=s(7),d=s(8),u=s(11),h=s(10),j=s(39),m=s(13),p=s(1),b=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).resizeImage=function(e,t,s){return new Promise((function(a){var n=new Image;n.src=e,n.onload=function(){var e=document.createElement("canvas"),c=t,i=s,l=n.width,r=n.height;l>r?l>c&&(r*=c/l,l=c):r>i&&(l*=i/r,r=i),e.width=l,e.height=r,e.getContext("2d").drawImage(n,0,0,l,r),a(e.toDataURL("image/jpeg",1))}}))},e.fileUpload=function(){var t=Object(r.a)(l.a.mark((function t(s){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.setUploading(!0),e.setState({btnState:"Uploading",btnClass:"btn btn-warning"}),a=s.target.files[0],e.getBase64(a,(function(t){e.resizeImage(t,200,200).then((function(t){var s=(new Date).getTime(),a=m.a.storage().ref();console.log(t);var n=a.child("posts/"+e.props.user.uid+"/"+s).putString(t,"data_url",{contentType:"image/jpeg"});n.on("state_changed",(function(e){}),(function(e){}),(function(){n.snapshot.ref.getDownloadURL().then((function(t){m.a.database().ref("posts/"+e.props.user.uid).push({image:t,time:(new Date).getTime()}).then((function(){console.log("Saved at",t),e.props.setUploading(!1),e.setState({btnState:"Uploaded",btnClass:"btn btn-success"})}))}))}))}))}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setMe=function(){var t={id:e.props.user.uid,displayName:e.props.user.displayName,displayPicture:e.props.user.photoURL};e.props.setWall(t)},e.state={btnState:"Add Post",btnClass:"btn btn-dark"},e}return Object(d.a)(s,[{key:"getBase64",value:function(e,t){var s=new FileReader;s.readAsDataURL(e),s.onload=function(){t(s.result)},s.onerror=function(e){console.log("Error: ",e)}}},{key:"render",value:function(){var e=this;return Object(p.jsx)("div",{className:"col",style:{marginTop:"10px"},children:Object(p.jsx)("div",{children:Object(p.jsxs)("div",{style:{textAlign:"center"},children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{hidden:!0,id:"icon-button-file",type:"file",onChange:this.fileUpload}),Object(p.jsx)("label",{htmlFor:"icon-button-file",style:{width:"100%"},className:"btn btn-dark",children:"Upload Image"})]}),Object(p.jsxs)("div",{id:this.props.user.uid,onClick:function(){e.setMe()},className:"row messages_list_item shadow ",children:[Object(p.jsx)("div",{className:"col-2",style:{padding:"0px"},children:this.props.user.photoURL?Object(p.jsx)("img",{alt:"DP",className:"listDP",src:this.props.user.photoURL}):Object(p.jsx)("img",{alt:"DP",className:"listDP",src:j.a})}),Object(p.jsx)("div",{className:"col",style:{alignSelf:"center"},children:Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-12",children:Object(p.jsx)("p",{className:"message-list-name",style:{textAlign:"start"},children:"You"})})})})]},this.props.user.id),this.props.friends.map((function(t,s){return Object(p.jsxs)("div",{id:t.id,onClick:function(){e.props.setWall(t)},className:"row messages_list_item shadow ",children:[Object(p.jsx)("div",{className:"col-2",style:{padding:"0px"},children:Object(p.jsx)("img",{alt:"DP",className:"listDP",src:t.displayPicture})}),Object(p.jsx)("div",{className:"col",style:{alignSelf:"center"},children:Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-12",children:Object(p.jsx)("p",{className:"message-list-name",style:{textAlign:"start"},children:t.displayName})})})})]},s)}))]})})})}}]),s}(n.a.Component),g=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){var e=this;return Object(p.jsxs)("div",{className:"col",style:{marginTop:"10px"},children:[Object(p.jsx)("button",{className:"btn ListButtons whitee shadow",onClick:function(){return e.props.setSettings("Edit")},children:"Edit Profile"}),Object(p.jsx)("button",{className:"btn ListButtons whitee shadow",onClick:function(){return e.props.setSettings("password")},children:"Change Password"}),Object(p.jsx)("button",{className:"btn btn-danger ListButtons",onClick:this.props.logout,children:"Logout"})]})}}]),s}(n.a.Component);t.a=function(e){return Object(p.jsx)("div",{className:e.MessageListClass,children:Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{style:{textAlign:"center"},children:Object(p.jsx)("h1",{className:"title_font",children:"Instance"})}),Object(p.jsxs)("div",{className:"row add-friends",children:[Object(p.jsx)("div",{className:"col icon-box",children:Object(p.jsxs)("svg",{onClick:function(){return e.setMenu("Chats")},className:"sidebar-icons",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512.001 512.001",children:[Object(p.jsx)("path",{d:"M468.53 306.575c-4.14-10.239-15.798-15.188-26.038-11.046-10.241 4.14-15.187 15.797-11.047 26.038L455 379.833l-69.958-30.839a20.002 20.002 0 00-15.917-.095c-23.908 10.201-49.52 15.373-76.124 15.373-107.073 0-179-83.835-179-162.136 0-89.402 80.299-162.136 179-162.136s179 72.734 179 162.136c0 6.975-.65 15.327-1.781 22.913-1.63 10.925 5.905 21.102 16.83 22.732 10.926 1.634 21.103-5.905 22.732-16.83 1.431-9.59 2.219-19.824 2.219-28.815 0-54.33-23.006-105.308-64.783-143.543C405.936 20.809 351.167 0 293.001 0S180.067 20.809 138.784 58.592c-37.332 34.168-59.66 78.516-63.991 126.335C27.836 216.023.001 265.852.001 319.525c0 33.528 10.563 65.34 30.67 92.717L1.459 484.504a19.998 19.998 0 004.621 21.855 19.989 19.989 0 0021.988 3.942l84.229-37.13c21.188 7.887 43.585 11.88 66.703 11.88.5 0 .991-.039 1.482-.075 33.437-.253 65.944-9.048 94.098-25.507 25.218-14.744 45.962-34.998 60.505-58.917a230.144 230.144 0 0041.547-11.551l107.301 47.3a20 20 0 0021.989-3.942 19.998 19.998 0 004.621-21.855L468.53 306.575zM179.002 445c-.273 0-.539.03-.81.041-20.422-.104-40.078-4.118-58.435-11.95a19.991 19.991 0 00-15.916.095l-46.837 20.646 15.109-37.375a20.001 20.001 0 00-3.322-20.47c-18.835-22.097-28.79-48.536-28.79-76.462 0-31.961 13.445-62.244 36.969-85.206 7.324 39.925 27.989 78.117 59.162 108.119 38.791 37.333 90.101 58.961 145.506 61.565C255.626 429.608 218.402 445 179.002 445z"}),Object(p.jsx)("circle",{cx:292.001,cy:203,r:20}),Object(p.jsx)("circle",{cx:372.001,cy:203,r:20}),Object(p.jsx)("circle",{cx:212.001,cy:203,r:20})]})}),Object(p.jsx)("div",{className:"col icon-box",children:Object(p.jsxs)("svg",{onClick:function(){return e.mapMode()},className:"sidebar-icons",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512.032 512.032",children:[Object(p.jsx)("path",{d:"M496.016 224c-8.832 0-16 7.168-16 16v181.184l-128 51.2V304c0-8.832-7.168-16-16-16s-16 7.168-16 16v168.352l-128-51.2V167.648l74.144 29.664c8.096 3.264 17.504-.704 20.8-8.928 3.296-8.192-.704-17.504-8.928-20.8l-95.776-38.336h-.032l-.256-.096a15.87 15.87 0 00-11.872 0l-.288.096h-.032L10.064 193.152A16.005 16.005 0 00.016 208v288c0 5.312 2.656 10.272 7.04 13.248a15.892 15.892 0 008.96 2.752c2.016 0 4.032-.384 5.952-1.152l154.048-61.6 153.76 61.504h.032l.288.128a15.87 15.87 0 0011.872 0l.288-.128h.032L502 446.88c6.016-2.464 10.016-8.32 10.016-14.88V240c0-8.832-7.168-16-16-16zm-336 197.152l-128 51.2V218.816l128-51.2v253.536zM400.016 64c-26.464 0-48 21.536-48 48s21.536 48 48 48 48-21.536 48-48-21.536-48-48-48zm0 64c-8.832 0-16-7.168-16-16s7.168-16 16-16 16 7.168 16 16-7.168 16-16 16z"}),Object(p.jsx)("path",{d:"M400.016 0c-61.76 0-112 50.24-112 112 0 57.472 89.856 159.264 100.096 170.688 3.04 3.36 7.36 5.312 11.904 5.312s8.864-1.952 11.904-5.312C422.16 271.264 512.016 169.472 512.016 112c0-61.76-50.24-112-112-112zm0 247.584c-34.944-41.44-80-105.056-80-135.584 0-44.096 35.904-80 80-80s80 35.904 80 80c0 30.496-45.056 94.144-80 135.584z"})]})}),Object(p.jsx)("div",{className:"col icon-box",children:Object(p.jsxs)("svg",{onClick:function(){return e.setMenu("Add Friends")},className:"sidebar-icons",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:[Object(p.jsx)("path",{d:"M367.57 256.909a260.207 260.207 0 00-30.093-12.081C370.56 219.996 392 180.455 392 136 392 61.01 330.991 0 256 0S120 61.01 120 136c0 44.504 21.488 84.084 54.633 108.911-30.368 9.998-58.863 25.555-83.803 46.069-45.732 37.617-77.529 90.086-89.532 147.743-3.762 18.066.745 36.622 12.363 50.908C25.222 503.847 42.365 512 60.693 512H307c11.046 0 20-8.954 20-20s-8.954-20-20-20H60.693c-8.538 0-13.689-4.766-15.999-7.606-3.989-4.905-5.533-11.29-4.236-17.519 20.755-99.695 108.691-172.521 210.24-174.977a137.229 137.229 0 0010.656-.002c31.12.73 61.05 7.832 89.044 21.14 9.977 4.74 21.907.499 26.649-9.478 4.742-9.976.5-21.907-9.477-26.649zm-106.692-25.032a260.16 260.16 0 00-9.718.002C200.465 229.35 160 187.312 160 136c0-52.935 43.065-96 96-96s96 43.065 96 96c0 51.299-40.445 93.329-91.122 95.877z"}),Object(p.jsx)("path",{d:"M492 397h-55v-55c0-11.046-8.954-20-20-20s-20 8.954-20 20v55h-55c-11.046 0-20 8.954-20 20s8.954 20 20 20h55v55c0 11.046 8.954 20 20 20s20-8.954 20-20v-55h55c11.046 0 20-8.954 20-20s-8.954-20-20-20z"})]})}),Object(p.jsx)("div",{className:"col icon-box",children:Object(p.jsx)("svg",{onClick:function(){return e.setMenu("Posts")},className:"sidebar-icons",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 431.972 431.972",children:Object(p.jsx)("path",{d:"M393.146 14.279c-3.713-5.333-8.713-9.233-14.989-11.707A31.606 31.606 0 00365.592.004V0H66.378c-4.377 0-8.562.857-12.56 2.568-6.28 2.472-11.278 6.377-14.989 11.707-3.71 5.33-5.568 11.228-5.568 17.701v368.019c0 6.475 1.858 12.371 5.568 17.706 3.711 5.329 8.709 9.233 14.989 11.704a31.577 31.577 0 0012.56 2.566c8.949 0 16.844-3.142 23.698-9.418l125.91-121.062 125.91 121.065c6.663 6.081 14.562 9.127 23.695 9.127 4.76 0 8.948-.756 12.565-2.279 6.276-2.471 11.276-6.375 14.989-11.711 3.71-5.328 5.564-11.225 5.564-17.699V31.98c.001-6.473-1.857-12.371-5.563-17.701zm-30.98 376.86L241.397 275.224l-25.411-24.264-25.409 24.264L69.809 391.139V36.549h292.357v354.59z"})})}),Object(p.jsx)("div",{className:"col icon-box",children:Object(p.jsxs)("svg",{onClick:function(){return e.setMenu("Settings")},className:"sidebar-icons",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:[Object(p.jsx)("path",{d:"M272.066 512h-32.133c-25.989 0-47.134-21.144-47.134-47.133v-10.871a206.698 206.698 0 01-32.097-13.323l-7.704 7.704c-18.659 18.682-48.548 18.134-66.665-.007l-22.711-22.71c-18.149-18.129-18.671-48.008.006-66.665l7.698-7.698A206.714 206.714 0 0158.003 319.2h-10.87C21.145 319.2 0 298.056 0 272.067v-32.134C0 213.944 21.145 192.8 47.134 192.8h10.87a206.755 206.755 0 0113.323-32.097L63.623 153c-18.666-18.646-18.151-48.528.006-66.665l22.713-22.712c18.159-18.184 48.041-18.638 66.664.006l7.697 7.697A206.893 206.893 0 01192.8 58.003v-10.87C192.8 21.144 213.944 0 239.934 0h32.133C298.056 0 319.2 21.144 319.2 47.133v10.871a206.698 206.698 0 0132.097 13.323l7.704-7.704c18.659-18.682 48.548-18.134 66.665.007l22.711 22.71c18.149 18.129 18.671 48.008-.006 66.665l-7.698 7.698a206.714 206.714 0 0113.323 32.097h10.87c25.989 0 47.134 21.144 47.134 47.133v32.134c0 25.989-21.145 47.133-47.134 47.133h-10.87a206.755 206.755 0 01-13.323 32.097l7.704 7.704c18.666 18.646 18.151 48.528-.006 66.665l-22.713 22.712c-18.159 18.184-48.041 18.638-66.664-.006l-7.697-7.697a206.893 206.893 0 01-32.097 13.323v10.871c0 25.987-21.144 47.131-47.134 47.131zM165.717 409.17a176.812 176.812 0 0045.831 19.025 14.999 14.999 0 0111.252 14.524v22.148c0 9.447 7.687 17.133 17.134 17.133h32.133c9.447 0 17.134-7.686 17.134-17.133v-22.148a14.999 14.999 0 0111.252-14.524 176.812 176.812 0 0045.831-19.025 15 15 0 0118.243 2.305l15.688 15.689c6.764 6.772 17.626 6.615 24.224.007l22.727-22.726c6.582-6.574 6.802-17.438.006-24.225l-15.695-15.695a15 15 0 01-2.305-18.242 176.78 176.78 0 0019.024-45.831 15 15 0 0114.524-11.251h22.147c9.447 0 17.134-7.686 17.134-17.133v-32.134c0-9.447-7.687-17.133-17.134-17.133H442.72a15 15 0 01-14.524-11.251 176.815 176.815 0 00-19.024-45.831 15 15 0 012.305-18.242l15.689-15.689c6.782-6.774 6.605-17.634.006-24.225l-22.725-22.725c-6.587-6.596-17.451-6.789-24.225-.006l-15.694 15.695a15 15 0 01-18.243 2.305 176.812 176.812 0 00-45.831-19.025 14.999 14.999 0 01-11.252-14.524v-22.15c0-9.447-7.687-17.133-17.134-17.133h-32.133c-9.447 0-17.134 7.686-17.134 17.133v22.148a14.999 14.999 0 01-11.252 14.524 176.812 176.812 0 00-45.831 19.025 15.002 15.002 0 01-18.243-2.305l-15.688-15.689c-6.764-6.772-17.627-6.615-24.224-.007l-22.727 22.726c-6.582 6.574-6.802 17.437-.006 24.225l15.695 15.695a15 15 0 012.305 18.242 176.78 176.78 0 00-19.024 45.831 15 15 0 01-14.524 11.251H47.134C37.687 222.8 30 230.486 30 239.933v32.134c0 9.447 7.687 17.133 17.134 17.133h22.147a15 15 0 0114.524 11.251 176.815 176.815 0 0019.024 45.831 15 15 0 01-2.305 18.242l-15.689 15.689c-6.782 6.774-6.605 17.634-.006 24.225l22.725 22.725c6.587 6.596 17.451 6.789 24.225.006l15.694-15.695c3.568-3.567 10.991-6.594 18.244-2.304z"}),Object(p.jsx)("path",{d:"M256 367.4c-61.427 0-111.4-49.974-111.4-111.4S194.573 144.6 256 144.6 367.4 194.574 367.4 256 317.427 367.4 256 367.4zm0-192.8c-44.885 0-81.4 36.516-81.4 81.4s36.516 81.4 81.4 81.4 81.4-36.516 81.4-81.4-36.515-81.4-81.4-81.4z"})]})})]}),Object(p.jsx)("div",{style:{textAlign:"center"},children:Object(p.jsx)("label",{className:"sub_Heading",style:{margin:"0px 15px"},children:e.menu})}),("Chats"===e.menu||"Friends-Map"===e.menu)&&Object(p.jsx)("div",{children:Object(p.jsx)(c.a,{recipient:e.recipient,users:e.occupants,type:"request",setRec:e.setRec,chatData:e.chatData})}),"Posts"===e.menu&&Object(p.jsx)(b,{user:e.user,friends:e.occupants,setWall:e.setWall,setUploading:e.setUploading}),"Settings"===e.menu&&Object(p.jsx)(g,{setSettings:e.setSettings,logout:e.logout}),"Add Friends"===e.menu&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"search shadow",children:Object(p.jsxs)("div",{className:"input-group add-friends-input",children:[Object(p.jsx)("input",{type:"text",className:"form-control",placeholder:"Search",onChange:e.fidTyped,value:e.fid}),Object(p.jsx)("div",{className:"input-group-append",children:Object(p.jsx)("button",{className:"btn btn-dark",type:"button",onClick:e.searchUsers,children:Object(p.jsx)("svg",{fill:"white",width:"20px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512.005 512.005",children:Object(p.jsx)("path",{d:"M505.749 475.587l-145.6-145.6c28.203-34.837 45.184-79.104 45.184-127.317C405.333 90.926 314.41.003 202.666.003S0 90.925 0 202.669s90.923 202.667 202.667 202.667c48.213 0 92.48-16.981 127.317-45.184l145.6 145.6c4.16 4.16 9.621 6.251 15.083 6.251s10.923-2.091 15.083-6.251c8.341-8.341 8.341-21.824-.001-30.165zM202.667 362.669c-88.235 0-160-71.765-160-160s71.765-160 160-160 160 71.765 160 160-71.766 160-160 160z"})})})})]})}),e.searched&&Object(p.jsx)("div",{className:"col",children:Object(p.jsxs)("div",{className:"row messages_list_item shadow",children:[Object(p.jsx)("div",{className:"col",style:{padding:"0px"},children:Object(p.jsx)("img",{alt:"DP",className:"add-friend-tile",src:e.searched.photoURL})}),Object(p.jsxs)("div",{className:"col",style:{alignSelf:"center"},children:[Object(p.jsx)("label",{className:"add-friends-name",children:e.searched.displayName}),Object(p.jsxs)("button",{className:e.addFriendClass,onClick:e.addFriend,children:[e.addFriendStatus,Object(p.jsxs)("svg",{className:"add-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:[Object(p.jsx)("path",{d:"M367.57 256.909a260.207 260.207 0 00-30.093-12.081C370.56 219.996 392 180.455 392 136 392 61.01 330.991 0 256 0S120 61.01 120 136c0 44.504 21.488 84.084 54.633 108.911-30.368 9.998-58.863 25.555-83.803 46.069-45.732 37.617-77.529 90.086-89.532 147.743-3.762 18.066.745 36.622 12.363 50.908C25.222 503.847 42.365 512 60.693 512H307c11.046 0 20-8.954 20-20s-8.954-20-20-20H60.693c-8.538 0-13.689-4.766-15.999-7.606-3.989-4.905-5.533-11.29-4.236-17.519 20.755-99.695 108.691-172.521 210.24-174.977a137.229 137.229 0 0010.656-.002c31.12.73 61.05 7.832 89.044 21.14 9.977 4.74 21.907.499 26.649-9.478 4.742-9.976.5-21.907-9.477-26.649zm-106.692-25.032a260.16 260.16 0 00-9.718.002C200.465 229.35 160 187.312 160 136c0-52.935 43.065-96 96-96s96 43.065 96 96c0 51.299-40.445 93.329-91.122 95.877z"}),Object(p.jsx)("path",{d:"M492 397h-55v-55c0-11.046-8.954-20-20-20s-20 8.954-20 20v55h-55c-11.046 0-20 8.954-20 20s8.954 20 20 20h55v55c0 11.046 8.954 20 20 20s20-8.954 20-20v-55h55c11.046 0 20-8.954 20-20s-8.954-20-20-20z"})]})]})]})]})}),e.error&&Object(p.jsx)("div",{className:"col",style:{textAlign:"center",padding:"10px"},children:Object(p.jsx)("div",{className:"col-12",style:{margin:"10px 0px"},children:Object(p.jsx)("p",{className:"message-list-name",children:e.error})})})]})]})})}},93:function(e,t,s){}},[[160,1,2]]]);
//# sourceMappingURL=main.f740ce3d.chunk.js.map